[{"path":"contents/npm-install.md","content":"# mapPlus Loader\n\n## 註冊\n\n請前往 <a href=\"https://kw3dmap.localking.com.tw/kwmap-docs/api/register/key-and-token\" target=\"_blank\">Kwmap Docs</a> 註冊帳號，取得 `accessKey` 與 `accessToken`。\n\n## 安裝\n\n```bash\nnpm install @kwmap/mapplus\n```\n\n## 使用方法\n\n***\n\n### 使用原生 JavaScript 開發\n\n```javascript\nimport mapPlus from '@kwmap/mapplus';\n\nconst map = await new mapPlus(document.getElementById('map'), {\n  accessKey: 'get_your_key',\n  accessToken: 'get_your_token',\n  style: 'https://kw3dmap.localking.com.tw/openapi/map/kwmap.etxt',\n  center: [121.53559860212545, 25.029308142529132],\n});\n\nmap.on('style.load', () => {\n  // 可以開始調用 map\n});\n```\n\n***\n\n### 使用 React 開發\n\n#### main.jsx\n\n於 `main.jsx` 使用 `<MapProvider>` 包裹 `useMap()` 與 `<MapComponent>` 作用域。\n\n```jsx\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { MapProvider } from '@kwmap/mapplus/libs/react';\nimport Map from './components/Map';\nimport './main.css';\n\ncreateRoot(document.getElementById('root')).render(\n  <StrictMode>\n    <MapProvider>\n      <Map/>\n    </MapProvider>\n  </StrictMode>,\n);\n```\n\n#### components/Map.jsx\n\n建立 `components/Map.jsx`，並引入 `<MapComponent>` 與 `useMap()`，即可開始使用地圖。\n\n```jsx\nimport { useEffect } from 'react';\nimport { MapComponent, useMap, mapPlus } from '@kwmap/mapplus/libs/react';\n\nexport default function Map() {\n  const { map } = useMap();\n\n  useEffect(() => {\n    if (map) {\n      // 可以開始調用 map\n    }\n  }, [map]);\n\n  return (\n    <MapComponent\n      mapOptions={{\n        accessKey: 'get_your_key',\n        accessToken: 'get_your_token',\n        style: 'https://kw3dmap.localking.com.tw/openapi/map/kwmap.etxt',\n        center: [121.53559860212545, 25.029308142529132],\n      }}\n    />\n  )\n}\n```\n\n***\n\n### 使用 Vue 開發\n\n#### components/Map.vue\n\n建立 `components/Map.jsx`，並引入 `<MapComponent>` 與 `useMap()`，即可開始使用地圖。\n\n```vue\n<template>\n  <MapComponent\n    :mapOptions=\"mapOptions\"\n    @style-load=\"mapOnStyleLoad\"\n  />\n</template>\n\n<script setup>\nimport { MapComponent, useMap, mapPlus } from '@kwmap/mapplus/libs/vue';\n\nconst mapOptions = {\n  accessKey: import.meta.env.VITE_MAP_KEY,\n  accessToken: import.meta.env.VITE_MAP_TOKEN,\n  style: 'https://kw3dmap.localking.com.tw/openapi/map/kwmap.etxt',\n  center: [121.53559860212545, 25.029308142529132],\n}\n\nconst mapOnStyleLoad = () => {\n  const { map } = useMap();\n  // 可以開始調用 map\n}\n</script>\n```\n\n***\n\n### 使用 Vite 作為打包工具\n\n在 `vite.config.js` 中引入 `viteMapPlusPlugin()`。\n\n```js\nimport { defineConfig } from 'vite';\nimport viteMapPlusPlugin from '@kwmap/mapplus/libs/vite';\n\nexport default defineConfig({\n  plugins: [\n    viteMapPlusPlugin(),\n  ],\n});\n```"}]